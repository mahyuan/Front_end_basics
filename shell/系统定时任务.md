# 定时任务

## at 一次性定时任务
at服务是否安装
> chkconfig --list | grep atd

at服务重启
> service atd restart

at的访问控制
> /etc/at.allow 白名单
> /etc/at.deny 黑名单 （对root不起作用）

白名单比黑名单优先级高。
如果这两个文件都不存在，那么只有root用户可以使用at命令

at使用方法:
> at [选项] 时间

选项：
 - -m: 当at工作完成后，无论是否命令有输出，都用email通知执行at命令的用户
 - -c：工作号：显示该at工作的实际内容

时间：
HH:MM  03:23
HH:MM: YYYY-MM=DD 02:32 2018-09-21
...

eg:
```sh
#在2分钟后执行脚本hello.sh
at now +2 minutes 
at > /home/mhy/work/hello.sh >> /home/mhy/work/log_hello.log
```

> atq #查询当前服务器上的at工作、

> atrm [工作号] # 删除指定的at任务

## crontab 循环定时任务
查看crond服务是否在运行：
```sh
chkconfig --list | grep cron
```
```sh
service crond status
```
启动crond服务：
```sh
service crond start|restart
```
同at命令，crontab也有白名单和黑名单：
- 白名单`/etc/cron.allow`
- 黑名单`/etc/cron.deny`

## 用户的crontab配置
> crontab [选项]

选项：
 - -e: 编辑crontab定时任务
 - -l: 查询crontab任务
 - -r: 删除当前用户所有的crontab任务

绑定当前登录用户，要确保没有超出当前用户权限。



## 系统的caontab
